{
  id: "com.chaozh.iReader.dj",
  name: "掌阅 iReader（TXT 阅读器版）",
  groups: [
    {
      key: 1,
      name: "底部横幅广告 - 自动关闭",
      activityIds: [
        "com.zhangyue.iReader.read.ui.Activity_BookBrowser_TXT",
        "com.chaozh.iReader.dj/com.zhangyue.iReader.read.ui.Activity_BookBrowser_TXT"
      ],
      rules: [
        {
          // 第一优先：官方 close 按钮 id
          matches: '[id$="/ad_close_2"],[id$="/ad_close"],[id$="/close_ad"],[id$="/close"]',
          action: "click",
          delay: 300,
          snapshotUrls: []
        },
        {
          // 兜底：底部广告容器高度固定，内部包含“广告”字样
          matches: '@[text*="告"] < *[height<200][width>300]',
          action: "click",
          delay: 400
        },
        {
          // 文本被混淆、拆字，例如 “广 告”“告⺁”“广𠆢告”
          // 采用正则识别逻辑（GKD 内 fts 支持）
          matches: '[text~=".*([广广⺁𠆢]|告).*"] < *[height<220]',
          action: "click",
          delay: 500
        }
      ]
    },

    {
      key: 2,
      name: "激励视频广告 / 看视频免广告弹层",
      activityIds: [
        "com.zhangyue.iReader.read.ui.Activity_BookBrowser_TXT"
      ],
      rules: [
        {
          // “看视频免广告” 按钮出现时自动点击关闭按钮
          matches: '[text*="免广告"],[text$="广告"],[text*="视频"] + * > [id$="/close"]',
          action: "click",
          delay: 350
        },
        {
          // 兜底：激励视频卡片通常有 open_video
          matches: '[id$="/open_video"] < * > [id$="/close"]',
          action: "click"
        },
        {
          // 防混淆处理：即使文字全变 icon，也关闭其父级容器
          matches: '[id$="multi_area_top_tip"] << * > [id$="/close"]',
          action: "click",
          delay: 450
        }
      ]
    },

    {
      key: 3,
      name: "推广类卡片广告（助力深度阅读 / 助力正版内容）",
      activityIds: [
        "com.zhangyue.iReader.read.ui.Activity_BookBrowser_TXT"
      ],
      rules: [
        {
          // 精准文本匹配
          matches: '[text*="助力"],[text*="正版"],[text*="深度阅读"] >> [id$="/close"]',
          action: "click"
        },
        {
          // 容器兜底结构：推广卡片一般位于底部广告同级，具有 padding 和 clickable
          matches: '*[clickable=true][height>160] > * > [text*="阅读"]',
          action: "click",
          delay: 350
        }
      ]
    },

    {
      key: 4,
      name: "反混淆与未来适配兜底策略",
      activityIds: [
        "com.zhangyue.iReader.read.ui.Activity_BookBrowser_TXT"
      ],
      rules: [
        {
          // UI 树中所有含 “close” 节点，但不能是顶部返回按钮（排除 back / 返回）
          matches: '[id*="close"][clickable=true]:not([id*="back"]):not([text="返回"])',
          action: "click",
          delay: 260
        },
        {
          // 如果广告覆盖屏幕底部（常见策略：sticky bottom）
          matches: '*[height<320][y>1000][clickable=true] > [text*="广告"]',
          action: "click",
          delay: 300
        },
        {
          // 屏蔽未来可能出现的“悬浮广告球”
          matches: '[id*="float"][text*="广"]',
          action: "click",
          delay: 400
        }
      ]
    }
  ]
}
